import{b,A as O,K as E,t as S,L as F,c as _,m as p,o as H,B as T,w,h as f,N,d as k,x as y,O as P,T as q}from"./index-DTVa-pX3.js";import{L as A}from"./index-x9l6dOy1.js";import{b as $}from"./R5675YMU-DFLsgUDc.js";import{H as B}from"./HyphenatedText-DdVj_fsw.js";import{M as D}from"./Modal-pyFXGLcY.js";import"./index-D4j3YW1A.js";function W(e,n){let o={},t=Object.keys(e);for(let s=0,l=t.length;s<l;s+=1){let i=t[s];n.includes(i)||Object.defineProperty(o,i,{get(){return e[i]},configurable:!0,enumerable:!0})}return o}function Y(e){let n=0,o=Number.MAX_SAFE_INTEGER;for(let t=0,s=e.length;t<s;t+=1)e[t]<o&&(o=e[t],n=t);return n}function j(e){let n=0,o=0;for(let t=0,s=e.length;t<s;t+=1)e[t]>o&&(o=e[t],n=t);return n}var z={position:"relative",width:"100%","max-width":"100%"},M=";position:relative;width:100%;max-width:100%;",V="data-solid-mason";function X(e){let n=getComputedStyle(e);return e.clientWidth-Number.parseFloat(n.paddingLeft)-Number.parseFloat(n.paddingRight)}function G(e,n){let o=n.columns.length,t=X(e),s=t!==n.width,l=t/o,i=new Array(n.columns.length).fill(0);s&&(n.columns=[...i]);let r=e.firstElementChild,a=0;for(;r;){if(r instanceof HTMLElement){let d=Y(i);if(s||n.elements[a]!==r){r.style.width=`${l}px`,r.style.position="absolute";let h=i[d];r.style.top=`${h}px`,r.style.left=`${d*l}px`,r.getBoundingClientRect();let c=r.offsetHeight;n.elements[a]=r,n.heights[a]=c,s=!0,i[d]=h+c}else i[d]+=n.heights[a];a+=1}r=r.nextElementSibling}let u=j(i),m=i[u];e.style.height=`${m}px`,n.width=t,n.columns=i}function K(e){let n;return p(()=>{cancelAnimationFrame(n)}),()=>{n&&cancelAnimationFrame(n),n=requestAnimationFrame(()=>{e()})}}var L=new Map;function Z(e){let n=L.get(e);if(n)return n;let o=window.matchMedia(e);return L.set(e,o),o}function J(e,n=1){let[o,t]=b(n);return O(()=>{let s=e();for(let l=0,i=s.length;l<i;l+=1){let r=s[l];_(()=>{let a=Z(r.query),u=()=>{a.matches&&t(r.columns)};u(),a.addEventListener("change",u,!1),p(()=>{a.removeEventListener("change",u,!1)})})}}),o}function Q(e){let[n,o]=b();return O(()=>{let t=n();if(t){t.style.position="relative",t.style.width="100%",t.style.maxWidth="100%";let s={width:0,columns:new Array(e.columns).fill(0),elements:[],heights:[]},l=K(()=>{G(t,s)});_(H(()=>e.items,()=>{l()})),window.addEventListener("resize",l,{passive:!0}),p(()=>{window.removeEventListener("resize",l)});let i=new MutationObserver(r=>{r.length&&l()});i.observe(t,{childList:!0}),p(()=>{i.disconnect()})}}),E(S({get component(){var t;return(t=e.as)!=null?t:"div"},ref:o,get children(){return F({get each(){return e.items},children(t,s){return E({component:"div",get children(){return e.children(t,s)},style:{position:"absolute"}})}})},get[V](){return e.columns},get style(){let t=e.style;return typeof t=="string"?`${t}${M}`:t?{...t,MASON_STYLE:z}:M}},W(e,["as","children","columns","items","style"])))}function U(e,n){n.observe(e)}function ee(e,n,o){const t=new IntersectionObserver(n,o),s=a=>U(a,t),l=a=>t.unobserve(a),i=()=>e.forEach(s),r=()=>t.takeRecords().forEach(a=>l(a.target));return i(),{add:s,remove:l,start:i,stop:p(()=>t.disconnect()),reset:r,instance:t}}function te(...e){let n=[],o={};Array.isArray(e[0])||e[0]instanceof Function?e[1]instanceof Function?(n=$(e[0]).map(h=>[h,e[1]]),o=e[2]):(n=$(e[0]),o=e[1]):o=e[0];const t=new WeakMap,s=(h,c)=>h.forEach(g=>{const v=t.get(g.target)?.(g,c);v instanceof Function&&v(g,c)}),{add:l,remove:i,stop:r,instance:a}=ee([],s,o),u=(h,c)=>{l(h),t.set(h,c)},m=h=>{t.delete(h),i(h)},d=()=>n.forEach(([h,c])=>u(h,c));return T(d),[u,{remove:m,start:d,stop:r,instance:a}]}var ne=y("<div class=masonroot>"),re=y("<div class=child><span>"),ie=y('<div class="card-text hyphenate">'),oe=y("<div class=cell>");const R=[{width:4,height:4},{width:4,height:3},{width:16,height:10},{width:16,height:9},{width:6,height:3},{width:21,height:9},{width:19,height:16},{width:5,height:4},{width:11,height:8},{width:6,height:4},{width:14,height:9},{width:5,height:3},{width:7,height:4},{width:11,height:5},{width:12,height:5},{width:8,height:3},{width:18,height:5},{width:12,height:3}],se=R.map(e=>({width:e.height,height:e.width})),I=[...R,...se].map(e=>({width:e.width*50,height:e.height*50}));function ae(e){return{...I[Math.floor(Math.random()*I.length)],id:e}}const le=()=>{const[e]=te(),[n,o]=b([]);function t(){o(i=>{const r=[...i];for(let a=0;a<20;a+=1)r.push(ae(r.length+1));return r})}function s(){window.innerHeight+window.scrollY>=document.body.offsetHeight&&t()}T(()=>{t(),document.addEventListener("scroll",s,{passive:!0}),p(()=>{document.removeEventListener("scroll",s)})});const l=J(()=>[{query:"(min-width: 1536px)",columns:3},{query:"(min-width: 1280px) and (max-width: 1536px)",columns:3},{query:"(min-width: 1024px) and (max-width: 1280px)",columns:3},{query:"(min-width: 768px) and (max-width: 1024px)",columns:2},{query:"(max-width: 768px)",columns:1}]);return(()=>{var i=ne();return w(i,f(Q,{get columns(){return l()},get items(){return n()},children:r=>{const[a,u]=b(!1);return(()=>{var m=oe();return N(e,m,()=>d=>u(d.isIntersecting)),w(m,f(D,{get aspectRatio(){return`${r.width}/${r.height}`},get title(){return`Image no. ${r.id}`},get children(){return[(()=>{var d=re(),h=d.firstChild;return w(h,()=>`Image no. ${r.id}`),k(c=>{var g=`url(https://picsum.photos/id/${r.id}/${r.width}/${r.height}/)`,v=!!a(),x=!a(),C=a()?{transform:"none"}:{transform:`translateY(-${Math.round(r.height/2)}px)`};return g!==c.e&&((c.e=g)!=null?d.style.setProperty("background-image",g):d.style.removeProperty("background-image")),v!==c.t&&h.classList.toggle("intersected",c.t=v),x!==c.a&&h.classList.toggle("notintersected",c.a=x),c.o=P(h,C,c.o),c},{e:void 0,t:void 0,a:void 0,o:void 0}),d})(),(()=>{var d=ie();return w(d,f(B,{get children(){return[f(A,{get count(){return Math.floor(Math.random()*5)}}),f(A,{get count(){return Math.floor(Math.random()*5)}})]}})),d})()]}})),m})()}})),i})()};var he=y("<main>");function we(){return(()=>{var e=he();return w(e,f(q,{children:"Ã‰chotone / Acceuil"}),null),w(e,f(le,{}),null),e})()}export{we as default};
